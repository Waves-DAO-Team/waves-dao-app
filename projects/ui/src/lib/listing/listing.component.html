<div class="container listing" *ngIf="user$ | async as user">
  <h1>
    {{'listing.title' | transloco}}
  </h1>

  <div class="top-desc">
    You can vote for grants from the community, vote for grant applicants, try to execute the grant yourself. <span>Select a category now:</span>
  </div>


  <div class="grants-variation">
    <div class="grant"
         [class.active]="user.masterAddress === api.contracts.disruptive"
         (click)="setEnv(api.contracts.disruptive)">
      <!--      <div class="img disruptive"></div>-->
      <img src="assets/img/disruptive-type.png">
      <div class="content">
        <div class="title">Disruptive Tech Grant</div>
        <div class="desc">Disruptive Tech Grant is awarded to implement tasks dedicated to developing solutions that
          meet the rapidly accelerating Waves ecosystemâ€™s needs.
        </div>
      </div>
    </div>
    <div class="grant"
         [class.active]="user.masterAddress === api.contracts.dev"
         (click)="setEnv(api.contracts.dev)">
      <img src="assets/img/dev-type.png">
      <div class="content">
        <div class="title">Web3.0 Dev Grant</div>
        <div class="desc">Web 3.0 Development Grant is awarded for creating products based on the Waves protocol that
          resolves specific problems and foster mass adoption.
        </div>
      </div>
    </div>
    <div class="grant"
         [class.active]="user.masterAddress === api.contracts.interhack"
         (click)="setEnv(api.contracts.interhack)">
      <img src="assets/img/interhack-type.png">
      <div class="content">
        <div class="title">Interhack Grant</div>
        <div class="desc">Interhack grants are awarded for building innovative solutions at hackathons in accordance
          with assignments provided by the Waves Association.
        </div>
      </div>
    </div>
    <div class="final"></div>
  </div>

  <div class="content">
    <ui-tag [tags]="listGrantStatuses" (selectedTag)="selectedTag($event)"></ui-tag>

    <!--grants-->
    <div class="listing-list" *ngIf="grants.data$ | async as list; else loadingOrErrorTemplate">

      <!--Important new-->
      <ng-container *ngIf="(importantGrant$ | async)?.length > 0">
        <div class="listing-list__title">Important grants</div>
        <a
          class="card active"
          *ngFor="let grant of importantGrant$ | async"
          [routerLink]="constants.routes.entity | route: grant.id">
          <div class="card__header">
            <div class="card__header__left-block">
              <div class="card__header__left-block__status">
                {{grant.status}}
                <div class="card__header__left-block__status__role-text"></div>
              </div>
              <div class="card__header__left-block__title">{{grant.title?.value}}</div>
            </div>
            <div class="card__header__right-block">
              <div class="card__header__right-block__text">Reward</div>
              <div class="card__header__right-block__price">
                {{grant?.reward?.value / 100000000 | number : '1.2'}}
                <div class="icon-logo"></div>
              </div>
            </div>
          </div>
        </a>
      </ng-container>

      <!-- Other new-->

      <ng-container *ngIf="(otherGrant$ | async)?.length > 0">
        <div class="listing-list__title">All grants</div>
        <a
          class="card"
          *ngFor="let grant of otherGrant$ | async"
          [routerLink]="constants.routes.entity | route: grant.id">
          <div class="card__header">
            <div class="card__header__left-block">
              <div class="card__header__left-block__status">
                {{grant.status}}
                <div class="card__header__left-block__status__role-text"></div>
              </div>
              <div class="card__header__left-block__title">{{grant.title?.value}}</div>
            </div>
            <div class="card__header__right-block">
              <div class="card__header__right-block__text">Reward</div>
              <div class="card__header__right-block__price">
                {{grant?.reward?.value / 100000000 | number : '1.2'}}
                <div class="icon-logo"></div>
              </div>
            </div>
          </div>
        </a>
      </ng-container>

      <!-- Other new-->

    </div>
    <ng-template #loadingOrErrorTemplate>
      <ng-container *ngIf="grants.error$ | async; else loading">
        List is a empty
      </ng-container>
    </ng-template>

    <ng-template #loading>
      Loading...
    </ng-template>


  </div>

</div>

<!--<ui-tag [tags]="listGrantStatuses" (selectedTag)="selectedTag($event)"></ui-tag>-->


