<div class="br3"></div>
<h1>Waves official grants</h1>
<div class="br3"></div>
<ui-tag [tags]="['Open', 'Close', 'On approval', 'In work']"></ui-tag>
<div class="br3"></div>
<div class="listing" *ngIf="grants.data$ | async as list; else loadingOrErrorTemplate">
  <ng-container *ngFor="let entity of list; trackBy: trackByFn">
    <a class="card" [routerLink]="constants.routes.entity | route: entity?.id">
      <div class="card__header">
        <div class="card__header__left-block">
          <div class="card__header__left-block__status">
            {{'listing.status.' + (entity?.status?.value || 'no_status') | transloco}}
            <div class="card__header__left-block__status__role-text"
                 *ngIf="userService.userData.getValue().userRole === RoleEnum.DAOMember
                  && entity?.status?.value === GrantStatusEnum.proposed">
              {{'listing.DAO_subtext.need_vote' | transloco}}
            </div>
          </div>

          <div class="card__header__left-block__title">{{entity?.title?.value}}</div>
        </div>
        <div class="card__header__right-block">
          <div class="card__header__right-block__text">Reward</div>
          <div class="card__header__right-block__price">
            {{entity?.reward?.value / 100000000 | number : '1.2'}}
            <div class="icon-logo"></div>
          </div>
        </div>
      </div>
    </a>
    <div class="br3"></div>
  </ng-container>
</div>

<ng-template #loadingOrErrorTemplate>
  <ng-container *ngIf="grants.error$ | async; else loading">
    List is a empty
  </ng-container>
</ng-template>

<ng-template #loading>
  Loading...
</ng-template>
