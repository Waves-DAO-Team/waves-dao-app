<div class="entity">

  <div class="card">

    <ui-header
      [status]="grant?.status?.value || 'no_status'"
      [title]="grant?.title?.value"
      [reward]="grant?.reward?.value"
      [link]="grant?.link?.value"
    ></ui-header>

    <ng-container [ngTemplateOutlet]="stepperTemplate"></ng-container>

    <ui-controls
      [contract]="contract"
      [status]="grant?.status?.value"
      [grantId]="grant?.id"
      [role]="userService.data.getValue().userRole"
      [voted]="grant?.voted"
      [performer]="grant?.performer?.value"
      (newFinishVoteEvent)="newFinishVoteEvent.emit()"
      (newStartWorkEvent)="newStartWorkEvent.emit()"
      (newRejectEvent)="newRejectEvent.emit()"
      (newAcceptWorkResultEvent)="newAcceptWorkResultEvent.emit($event)"
      (newFinishApplicantsVoteEvent)="newFinishApplicantsVoteEvent.emit()"
      (newAddRewardEvent)="newAddRewardEvent.emit()"
      [controlsTemplate]="controlsTemplate"
    ></ui-controls>

    <ui-body
      [md]="grant?.link?.value | linkContent | async"
      [link]="grant?.link?.value"
      [grant]="grant"
    ></ui-body>
  </div>

  <ng-container [ngTemplateOutlet]="teamTemplate"></ng-container>

  <ng-container [ngTemplateOutlet]="voteForTaskTemplate"></ng-container>

</div>
