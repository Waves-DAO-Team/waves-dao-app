<div class="entity">

  <!-- unauthorized --------------------------------------------------------------------------------------------------->
  <div class="card" *ngIf="(userService.data | async)?.userRole == userRoleEnum.unauthorized">
    <div class="card__header">
      <div class="card__header__left-block">
        <div class="card__header__left-block__status">
          {{'listing.status.' + (grant?.status?.value || 'no_status') | transloco}}
        </div>
        <div class="card__header__left-block__title">{{grant?.title?.value}}</div>
      </div>
      <div class="card__header__right-block">
        <div class="card__header__right-block__text">
          {{'entity.reward' | transloco}}
        </div>
        <div class="card__header__right-block__price">
          {{grant?.reward?.value / 100000000 | number : '1.2'}}
          <div class="icon-logo"></div>
        </div>
      </div>
    </div>
    <div class="card__body">
      <pre>{{ grant | json }}</pre>
      <div class="btn-container">
        <button class="btn active" (click)="userService.signup()">
          {{'entity.log_in_for_apply' | transloco}}
        </button>
      </div>
    </div>
  </div>
  <!-- unauthorized --------------------------------------------------------------------------------------------------->

  <!-- authorized ----------------------------------------------------------------------------------------------------->
    <div class="card" *ngIf="(userService.data | async)?.userRole == userRoleEnum.authorized">
<!--  <div class="card">-->
    <div class="card__header">
      <div class="card__header__left-block">
        <div class="card__header__left-block__status">
          {{'listing.status.' + (grant?.status?.value || 'no_status') | transloco}}
        </div>
        <div class="card__header__left-block__title">{{grant?.title?.value}}</div>
      </div>
      <div class="card__header__right-block">
        <div class="card__header__right-block__text">
          {{'entity.reward' | transloco}}
        </div>
        <div class="card__header__right-block__price">
          {{grant?.reward?.value / 100000000 | number : '1.2'}}
          <div class="icon-logo"></div>
        </div>
      </div>
    </div>
    <div class="card__body">
      <pre>{{ grant | json }}</pre>
      <div class="btn-container">
        <button class="btn active" [routerLink]="['/', 'apply-grant', 6]">
          {{'entity.apply' | transloco}}
        </button>
      </div>
    </div>
    <div class="card__info">
      <div class="card__info__left">
        <img src="assets/icons/grant-completed.svg" *ngIf="grant?.status?.value === grantStatusEnum.workFinished">
        <img src="assets/icons/grant-failed.svg" *ngIf="grant?.status?.value === grantStatusEnum.rejected">
        <img src="assets/icons/grant-wait.svg" *ngIf="grant?.status?.value === grantStatusEnum.proposed">
      </div>
      <div class="card__info__mid">
        <ng-container *ngIf="grant?.status?.value === grantStatusEnum.proposed">
          <div class="card__info__mid__subtext">
            {{'entity.grant.status.proposed.subtext' | transloco}}
          </div>
          <div class="card__info__mid__text">
            {{'entity.grant.status.proposed.text' | transloco}}
          </div>
        </ng-container>
        <ng-container *ngIf="grant?.status?.value === grantStatusEnum.rejected">
          <div class="card__info__mid__subtext">
            {{'entity.grant.status.rejected.subtext' | transloco}}
          </div>
          <div class="card__info__mid__text">
            {{'entity.grant.status.rejected.text' | transloco}}
          </div>
        </ng-container>
        <ng-container *ngIf="grant?.status?.value === grantStatusEnum.workFinished">
          <div class="card__info__mid__subtext">
            {{'entity.grant.status.workFinished.subtext' | transloco}}
          </div>
          <div class="card__info__mid__text">
            {{'entity.grant.status.workFinished.text' | transloco}}
          </div>
        </ng-container>
      </div>
    </div>
  </div>
  <!-- authorized ----------------------------------------------------------------------------------------------------->

  <!-- DAOMember ------------------------------------------------------------------------------------------------------>
    <div class="card" *ngIf="(userService.data | async)?.userRole == userRoleEnum.DAOMember">
<!--  <div class="card">-->
    <div class="card__header">
      <div class="card__header__left-block">
        <div class="card__header__left-block__status">
          {{'listing.status.' + (grant?.status?.value || 'no_status') | transloco}}
        </div>
        <div class="card__header__left-block__title">{{grant?.title?.value}}</div>
      </div>
      <div class="card__header__right-block">
        <div class="card__header__right-block__text">
          {{'entity.reward' | transloco}}
        </div>
        <div class="card__header__right-block__price">
          {{grant?.reward?.value / 100000000 | number : '1.2'}}
          <div class="icon-logo"></div>
        </div>
      </div>
    </div>
    <div class="card__body">
      <pre>{{ grant | json }}</pre>
    </div>
    <div class="card__info">
      <div class="card__info__left">
        <img src="assets/icons/vote.svg">
      </div>
      <div class="card__info__mid">
        <ng-container *ngIf="!isDAOVote">
          <div class="card__info__mid__subtext">
            {{'entity.DAO.vote.true.subtext' | transloco}}
          </div>
          <div class="card__info__mid__text">
            {{'entity.DAO.vote.true.text' | transloco}}
          </div>
        </ng-container>
        <ng-container *ngIf="isDAOVote">
          <div class="card__info__mid__subtext">
            {{'entity.DAO.vote.false.text' | transloco}}
          </div>
          <div class="card__info__mid__text">
            {{'entity.DAO.vote.false.text' | transloco}}
          </div>
        </ng-container>
      </div>
      <div class="card__info__right" *ngIf="!isDAOVote">
        <img (click)="vote()" src="assets/icons/vote-min.svg">
        <img (click)="vote()" src="assets/icons/vote-plus.svg">
      </div>
    </div>
  </div>
  <!-- DAOMember ------------------------------------------------------------------------------------------------------>

  <!-- workingGroup --------------------------------------------------------------------------------------------------->
    <div class="card" *ngIf="(userService.data | async)?.userRole == userRoleEnum.DAOMember">
<!--  <div class="card">-->
    <div class="card__header">
      <div class="card__header__left-block">
        <div class="card__header__left-block__status">
          {{'listing.status.' + (grant?.status?.value || 'no_status') | transloco}}
        </div>
        <div class="card__header__left-block__title">{{grant?.title?.value}}</div>
      </div>
      <div class="card__header__right-block">
        <div class="card__header__right-block__text">
          {{'entity.reward' | transloco}}
        </div>
        <div class="card__header__right-block__price">
          {{grant?.reward?.value / 100000000 | number : '1.2'}}
          <div class="icon-logo"></div>
        </div>
      </div>
    </div>
    <div class="card__body">
      <pre>{{ grant | json }}</pre>
      <div class="btn-container">
        <button (click)="modal?.openModal()" class="btn">
          {{'entity.remove' | transloco}}
        </button>
        <button (click)="modal?.openModal()" class="btn">
          {{'entity.edit' | transloco}}
        </button>
        <button (click)="modal?.openModal()" class="btn">
          {{'entity.finish_vote' | transloco}}
        </button>
      </div>
    </div>
  </div>
  <!-- workingGroup --------------------------------------------------------------------------------------------------->

  <!-- master --------------------------------------------------------------------------------------------------------->
    <div class="card" *ngIf="(userService.data | async)?.userRole == userRoleEnum.master">
<!--  <div class="card">-->
    <div class="card__header">
      <div class="card__header__left-block">
        <div class="card__header__left-block__status">
          {{'listing.status.' + (grant?.status?.value || 'no_status') | transloco}}
        </div>
        <div class="card__header__left-block__title">{{grant?.title?.value}}</div>
      </div>
      <div class="card__header__right-block">
        <div class="card__header__right-block__text">
          {{'entity.reward' | transloco}}
        </div>
        <div class="card__header__right-block__price">
          {{grant?.reward?.value / 100000000 | number : '1.2'}}
          <div class="icon-logo"></div>
        </div>
      </div>
    </div>
    <div class="card__body">
      <pre>{{ grant | json }}</pre>
      <div class="btn-container no-padding-right">
        <button class="btn active"> {{'entity.apply' | transloco}}</button>
      </div>
    </div>
  </div>
  <!-- master --------------------------------------------------------------------------------------------------------->
  <ui-modal></ui-modal>
</div>
