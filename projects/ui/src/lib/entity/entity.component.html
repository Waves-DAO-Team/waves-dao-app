
  <div class="entity">
    <!-- unauthorized --------------------------------------------------------------------------------------------------->
    <div class="card" *ngIf="(userService.data | async)?.userRole == userRoleEnum.unauthorized">
      <ui-header
        [status]="grant?.status?.value || 'no_status'"
        [title]="grant?.title?.value"
        [reward]="grant?.reward?.value"
        [link]="grant?.link?.value"
      ></ui-header>
      <ui-body
        [md]="linkContentService.mdText$.getValue()"
        [link]="grant?.link?.value"
        [grant]="grant"
      ></ui-body>
    </div>
    <!-- unauthorized --------------------------------------------------------------------------------------------------->

    <!-- authorized ----------------------------------------------------------------------------------------------------->
    <div class="card" *ngIf="(userService.data | async)?.userRole == userRoleEnum.authorized">
      <ui-header
        [status]="grant?.status?.value || 'no_status'"
        [title]="grant?.title?.value"
        [reward]="grant?.reward?.value"
        [link]="grant?.link?.value"
      ></ui-header>
      <ui-body
        [md]="linkContentService.mdText$.getValue()"
        [link]="grant?.link?.value"
        [grant]="grant"
      ></ui-body>
    </div>
    <!-- authorized ----------------------------------------------------------------------------------------------------->

    <!-- DAOMember ------------------------------------------------------------------------------------------------------>
    <div class="card" *ngIf="(userService.data | async)?.userRole == userRoleEnum.DAOMember">
      <ui-header
        [status]="grant?.status?.value || 'no_status'"
        [title]="grant?.title?.value"
        [reward]="grant?.reward?.value"
        [link]="grant?.link?.value"
      ></ui-header>
      <ui-body
        [md]="linkContentService.mdText$.getValue()"
        [link]="grant?.link?.value"
        [grant]="grant"
      ></ui-body>
    </div>
    <!-- DAOMember ------------------------------------------------------------------------------------------------------>

    <!-- workingGroup --------------------------------------------------------------------------------------------------->
    <div class="card" *ngIf="(userService.data | async)?.userRole == userRoleEnum.workingGroup">
      <ui-header
        [status]="grant?.status?.value || 'no_status'"
        [title]="grant?.title?.value"
        [reward]="grant?.reward?.value"
        [link]="grant?.link?.value"
      ></ui-header>
      <ui-body
        [md]="linkContentService.mdText$.getValue()"
        [link]="grant?.link?.value"
        [grant]="grant"
      ></ui-body>
    </div>
    <!-- workingGroup --------------------------------------------------------------------------------------------------->

    <!-- master --------------------------------------------------------------------------------------------------------->
    <div class="card" *ngIf="(userService.data | async)?.userRole == userRoleEnum.master">
      <ui-header
        [status]="grant?.status?.value || 'no_status'"
        [title]="grant?.title?.value"
        [reward]="grant?.reward?.value"
        [link]="grant?.link?.value"
      ></ui-header>
      <ui-body
        [md]="linkContentService.mdText$.getValue()"
        [link]="grant?.link?.value"
        [grant]="grant"
      ></ui-body>
    </div>
    <!-- master --------------------------------------------------------------------------------------------------------->

    <ui-controls
      [status]="grant?.status?.value"
      [grantId]="grant?.id"
      [role]="userService.data.getValue().userRole"
      [voted]="grant?.voted"
      [performer]="grant?.performer?.value"
      (openApplyModal)="openApplyModal($event)"
    ></ui-controls>

    <!-- team ----------------------------------------------------------------------------------------------------------->
    <ui-team
      [grant]="grant"
    ></ui-team>
    <!-- team ----------------------------------------------------------------------------------------------------------->

    <!-- vote ----------------------------------------------------------------------------------------------------------->
    <!--   *ngIf="(userService.data | async)?.roles.isDAO && !(userService.data | async)?.voted.includes(grant.id)"-->
    <div class="card"
         *ngIf="(userService.data | async)?.roles.isDAO && grant?.status?.value === grantStatusEnum.proposed">
      <div
        class="card__info">
        <div class="card__info__left">
          <img src="assets/icons/vote.svg">
        </div>
        <div class="card__info__mid">
          <ng-container *ngIf="(userService.data | async)?.voted.includes(grant.id)">
            <div class="card__info__mid__subtext">
              {{'entity.DAO.vote.true.subtext' | transloco}}
            </div>
            <div class="card__info__mid__text">
              {{'entity.DAO.vote.true.text' | transloco}}
            </div>
          </ng-container>
          <ng-container *ngIf="!(userService.data | async)?.voted.includes(grant.id)">
            <div class="card__info__mid__subtext">
              {{'entity.DAO.vote.false.text' | transloco}}
            </div>
            <div class="card__info__mid__text">
              {{'entity.DAO.vote.false.text' | transloco}}
            </div>
          </ng-container>
        </div>
        <div class="card__info__right" *ngIf="!(userService.data | async)?.voted.includes(grant.id)">
          <img (click)="vote('dislike')" src="assets/icons/vote-min.svg">
          <img (click)="vote('like')" src="assets/icons/vote-plus.svg">
        </div>
      </div>
    </div>
    <!-- vote ----------------------------------------------------------------------------------------------------------->



    <ui-modal>
      <ng-container *ngIf="modalStep === 1">
        <div class="step">STEP 1</div>
        <div class="title">Apply form on GitHubt</div>
        <div class="text">Please submit the form using <a href="https://github.com/Waves-Association/grants-program/issues/new?assignees=KardanovIR&labels=Interhack+Grant&template=track-3--interhack-grant.md&title=%5BTrack+3.+Interhack+Grant%5D+" target="_blank">issue on GitHub</a>.</div>
        <div class="btn-container full">
          <button type="button" class="btn" (click)="modalGoTo('NEED_APPLY')">APPLY ON GITHUB</button>
          <button type="button" class="btn active" (click)="modalGoTo('ALREADY_APPLIED')">I ALREADY APPLIED</button>
        </div>
      </ng-container>
      <ng-container *ngIf="modalStep === 2">
        <div class="step">STEP 2</div>
        <div class="title">Link to apply form</div>
        <form [formGroup]="applyGrantForm" (ngSubmit)="onSubmitApplyGrantForm()">
          <div class="input">
            <div class="input-wrp">
              <br/>
              <input type="text" class="inputText" formControlName="team" required />
              <span class="floating-label">{{'apply_grant.form.team.label' | transloco}}</span>
            </div>
          </div>
          <div class="input">
            <div class="input-wrp">
              <br/>
              <input type="text" class="inputText" formControlName="link" required />
              <span class="floating-label">{{'apply_grant.form.link.label' | transloco}}</span>
              <div class="sub-text">Please submit the form using <a href="https://github.com/Waves-Association/grants-program/issues/new?assignees=KardanovIR&labels=Interhack+Grant&template=track-3--interhack-grant.md&title=%5BTrack+3.+Interhack+Grant%5D+" target="_blank">issue on GitHub</a> and paste the link to it above.</div>
            </div>
          </div>
          <div class="btn-container">
            <button type="button" (click)="modal?.onCancel()" class="btn">{{'modal.cancel' | transloco}}</button>
            <button type="submit" class="btn active" [disabled]="!applyGrantForm.valid">{{'apply_grant.form.apply' | transloco}}</button>
          </div>
        </form>
      </ng-container>

    </ui-modal>
  </div>
