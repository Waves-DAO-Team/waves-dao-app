<div class="team" *ngIf="userService.data | async as user">

  <div class="team__header" *ngIf="grant?.isShowAppliers">

    <div class="team__title mat-display-4">{{'entity.teams' | transloco}}</div>

    <div class="team__controls" *ngIf="grant?.status?.value === grantStatusEnum.readyToApply">
      <button
        class="active"
        (click)="newSignupEvent.emit()"
        *ngIf="user.roles.isUnauthorized"
        routerLinkActive="active"
      >
        {{'entity.log_in_for_apply' | transloco}}
      </button>

      <button
        class="active"
        (click)="newOpenApplyModalEvent.emit()"
        [disabled]="(userService.isBalanceMoreCommission$ | async) === false"
        *ngIf="user.roles.isAuth"
        routerLinkActive="active"
      >
        {{'entity.apply' | transloco}}
      </button>
    </div>
  </div>

  <ul *ngIf="grant?.app?.length > 0" class="team__list">
    <li *ngFor="let app of grant?.app | sortByTeam" [class.winner]="app?.process" class="team__list__li">

      <div [ngSwitch]="user.roles.isDAO" class="team__list__li__left">
        <ng-container *ngSwitchCase="true">
          <div class="team__list__li__left__up" [class.disabled]="!isReadyToApply()">
            <img
              src="assets/icons/arr-up.svg"
              (click)="newVoteTeamEvent.emit( {voteValue: 'like', teamIdentifier: app.id.value})"
              *ngIf="!isReadyToApply() && user.roles.isDAO">
            <img
              src="assets/icons/arr-up-blue.svg"
              (click)="newVoteTeamEvent.emit( {voteValue: 'like', teamIdentifier: app.id.value})"
              *ngIf="isReadyToApply() && user.roles.isDAO">
          </div>
          <div class="team__list__li__left__score mat-display-2">{{app?.score?.value || 0}}</div>
          <div class="team__list__li__left__down" [class.disabled]="!isReadyToApply()">
            <img src="assets/icons/arr-down.svg"
                 (click)="newVoteTeamEvent.emit( {voteValue: 'dislike', teamIdentifier: app.id.value})"
                 *ngIf="!isReadyToApply() && user.roles.isDAO">
            <img
              src="assets/icons/arr-down-red.svg"
              (click)="newVoteTeamEvent.emit( {voteValue: 'like', teamIdentifier: app.id.value})"
              *ngIf="isReadyToApply() && user.roles.isDAO">
          </div>
        </ng-container>
        <ng-container *ngSwitchDefault>
          <div class="team__list__li__left__top mat-display-1">{{'entity.votes' | transloco}}</div>
          <div class="team__list__li__left__bottom mat-display-4">{{app?.score?.value || 0}}</div>
        </ng-container>
      </div>

      <div class="team__list__li__mid">
        <div class="team__list__li__mid__name mat-display-2">{{app?.name?.value}}</div>
        <a class="team__list__li__mid__link  mat-display-1" [href]="app?.link?.value">
          {{'entity.learn_about_team' | transloco}} <img src="assets/icons/link.svg">
        </a>
      </div>
      <div class="team__list__li__right mat-display-2">
        <ng-container *ngIf="app.process">
          <img src="assets/icons/winner.png">{{'entity.winner' | transloco}}
        </ng-container>
      </div>
    </li>
  </ul>

  <div class="card__body" *ngIf="grant?.app?.length === 0 && grant?.isShowAppliers">
    {{'entity.no_applied_teams' | transloco}}
  </div>
</div>
