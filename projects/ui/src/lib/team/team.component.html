<div class="team" *ngIf="userService.data | async as user">


  <div class="team__header" *ngIf="grant?.isShowAppliers">

    <div class="team__title mat-display-4">{{titleText}}</div>

    <div class="team__controls">
      <button
        class="active"
        (click)="newSignupEvent.emit()"
        *ngIf="user.roles.isUnauthorized"
        routerLinkActive="active"
      >
       {{'entity.log_in_for_apply' | transloco}}
      </button>


      <div
        matTooltip="{{'tooltip.not_enough_money' | transloco}}"
        [matTooltipDisabled]="(userService.isBalanceMoreCommission$ | async) !== false"
      >
        <button
          class="active"
          (click)="newOpenApplyModalEvent.emit()"
          [disabled]="(userService.isBalanceMoreCommission$ | async) === false"
          *ngIf="teamsControls?.isApplyBtn"
          routerLinkActive="active"
        >
         {{ applyBtnText }}
        </button>
      </div>

    </div>
  </div>

  <ul *ngIf="grant?.app?.length > 0" class="team__list">

    <ng-container *ngFor="let app of grant?.app | sortByTeam">
      <li *ngIf="isProcess && app?.score?.value !> -1 || !isProcess" [class.winner]="app?.process" class="team__list__li">

        <ui-voting-square
          [votes]="app?.score?.value"
          [teamId]="app?.id?.value"
          [isCanVote]="
            (!(teamsControls?.isVoteControls === 'hidden')
            && grantStatusEnum.rejected !== grant?.status?.value)
            && !teamsControls?.voteFor.includes(app?.id?.value)
          "
          [isShowResult]="!user.roles.isDAO"
          (voteEvent)="newVoteTeamEvent.emit($event)"
        ></ui-voting-square>

        <div class="team__list__li__mid">
          <div class="team__list__li__mid__name mat-display-1" title="{{app?.name?.value}}">
            {{app?.name?.value}}
            <ui-statuses
              [isRejected]="isHasWinner && app?.score?.value < 0"
            ></ui-statuses>
          </div>
          <a
            class="team__list__li__mid__link mat-display-1"
            [href]="app?.link?.value | linkHttp"
            target="_blank"
            rel="noopener nofollow noreferrer">
            {{'entity.learn_about_team' | transloco}} <img alt="link" src="assets/icons/link.svg">
          </a>
        </div>
        <div class="team__list__li__right mat-display-2">
          <ng-container *ngIf="app.process">
            <img alt="winner" src="assets/icons/winner.png">{{'entity.performer' | transloco}}
          </ng-container>
        </div>
      </li>
    </ng-container>


  </ul>

</div>
